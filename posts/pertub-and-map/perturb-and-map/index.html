<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Perturb and MAP</title><link rel=stylesheet href=https://326623.github.io/css/site.min.61e13065c16d094e2fbb0fd81497b5b8bda4ebd386cd235f96494a132de4481f6ca7383a77e01539498694f01be0b34c3b2eccd2c56ada5e90388ac6f87efa6c.css integrity="sha512-YeEwZcFtCU4vuw/YFJe1uL2k69OGzSNflklKEy3kSB9spzg6d&#43;AVOUmGlPAb4LNMOy7M0sVq2l6QOIrG&#43;H76bA=="><link rel=canonical href=https://326623.github.io/posts/pertub-and-map/perturb-and-map/><link rel=alternate type=application/rss&#43;xml href=https://326623.github.io/index.xml title=JoyComputing><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=author content="Joy"><meta name=description content="No title  body { text-align: justify } h5 { display: inline; padding-right: 1em } h6 { display: inline; padding-right: 1em } table { border-collapse: collapse } td { padding: 0.2em; vertical-align: baseline } .subsup { display: inline; vertical-align: -0.2em } .subsup td { padding: 0px; text-align: left} .fraction { display: inline; vertical-align: -0.8em } .fraction td { padding: 0px; text-align: center } .wide { position: relative; margin-left: -0.4em } ."><meta property="og:title" content="Perturb and MAP"><meta property="og:description" content="No title  body { text-align: justify } h5 { display: inline; padding-right: 1em } h6 { display: inline; padding-right: 1em } table { border-collapse: collapse } td { padding: 0.2em; vertical-align: baseline } .subsup { display: inline; vertical-align: -0.2em } .subsup td { padding: 0px; text-align: left} .fraction { display: inline; vertical-align: -0.8em } .fraction td { padding: 0px; text-align: center } .wide { position: relative; margin-left: -0.4em } ."><meta property="og:type" content="article"><meta property="og:url" content="https://326623.github.io/posts/pertub-and-map/perturb-and-map/"><meta property="article:published_time" content="2020-03-04T15:22:21+08:00"><meta property="article:modified_time" content="2020-03-04T15:22:21+08:00"></head><body><nav class="navbar is-transparent" role=navigation aria-label="main navigation"><div class=navbar-brand><a class=navbar-item href=https://326623.github.io/><figure class=image><img alt class=is-rounded src="https://www.gravatar.com/avatar/b3456cf695fe86b582692e0027c4a72d?s=128&d=identicon"></figure></a><a class=navbar-item href=https://326623.github.io/>JoyComputing</a></div><div class=navbar-menu><div class=navbar-start></div><div class=navbar-end><a class=navbar-item href=mailto:yangqp5@outlook.com target=_blank><span class=icon><img alt=email src=https://326623.github.io/icons/svg/email.svg></span></a>
<a class=navbar-item href=https://326623.github.io/index.xml target=_blank><span class=icon><img alt=rss src=https://326623.github.io/icons/svg/rss.svg></span></a></div></div></nav><section class="hero is-small is-info is-fullwidth"><div class=hero-body><div class=container><h1 class=title>Perturb and MAP</h1><h2 class=subtitle><time datetime=2020-03-04T15:22:21&#43;08:00>March 04, 2020</time></h2></div></div></section><section class=section><div class=container><div class="content is-medium"><!doctype html><html xmlns=http://www.w3.org/1999/xhtml xmlns:x=http://www.texmacs.org/2002/extensions xmlns:m=http://www.w3.org/1998/Math/MathML><head><title>No title</title><meta content="TeXmacs 1.99.11" name=generator></meta><style type=text/css>body{text-align:justify}h5{display:inline;padding-right:1em}h6{display:inline;padding-right:1em}table{border-collapse:collapse}td{padding:.2em;vertical-align:baseline}.subsup{display:inline;vertical-align:-.2em}.subsup td{padding:0;text-align:left}.fraction{display:inline;vertical-align:-.8em}.fraction td{padding:0;text-align:center}.wide{position:relative;margin-left:-.4em}.accent{position:relative;margin-left:-.4em;top:-.1em}.title-block{width:100%;text-align:center}.title-block p{margin:0}.compact-block p{margin-top:0;margin-bottom:0}.left-tab{text-align:left}.center-tab{text-align:center}.balloon-anchor{border-bottom:1px dotted #000;outline:none;cursor:help;position:relative}.balloon-anchor [hidden]{margin-left:-999em;position:absolute;display:none}.balloon-anchor: hover [hidden]{position:absolute;left:1em;top:2em;z-index:99;margin-left:0;width:500px;display:inline-block}.balloon-body{}.ornament{border-width:1px;border-style:solid;border-color:#000;display:inline-block;padding:.2em}.right-tab{float:right;position:relative;top:-1em}math{font-family:cmr,times,verdana}</style></head><body><table class=title-block><tr><td><table class=title-block><tr><td><font style=font-size:168.2%><b>Perturb and MAP</b></font></td></tr></table><p style=margin-top:1em;margin-bottom:1em><div class=compact-block><table class=title-block><tr><td><p style=margin-top:.5em;margin-bottom:.5em><span style=margin-left:0></span><table style=display:inline-table;vertical-align:middle><tbody><tr><td style=text-align:center;padding-left:0;padding-right:0;padding-bottom:0;padding-top:0;width:100%><center><p><class style=font-variant:small-caps>by Joy Yang</class></p></center></td></tr></tbody></table></p></td></tr></table></div></p><table class=title-block><tr><td><i>2020-03-04</i></td></tr></table></td></tr></table><h2 id=auto-1>1<span style=margin-left:1em></span>Introduction<span style=margin-left:1em></span></h2><p>Perturbation and Maximum A-Posteriori (Perturb-and-MAP) is ubiquitous in
the field of statistic learning, derived from the wonderful property of
Gumbel distribution, which gives the connection between maximization of
a series of random perturbated variables and summation. It is often used
to tackle the problem of computational intractable summation of the form
<math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Z</mi><mo>=</mo><msub><mo>&Sum;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></msub><mi>exp</mi><mrow><mo
      form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo
      form="postfix">)</mo></mrow></mrow></math>, where <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Y</mi><mo>=</mo><msub><mi>Y</mi><mn>1</mn></msub><mo>×</mo><msub><mi>Y</mi><mn>2</mn></msub><mo>×</mo><mi>⋯</mi><mo>×</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow></math>.
To show its intractability, simply take all as<math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>Y</mi><mi>i</mi></msub><mo>=</mo><mrow><mo
      form="prefix">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo form="postfix">}</mo></mrow></mrow></math>
for <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi></mrow></math>,
and the sum (or partition function) thus becomes:</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>Z</mi><mo>=</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mn>1</mn></msub><mo>∈</mo><msub><mi>Y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>∈</mo><msub><mi>Y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow></munder><mi>exp</mi><mrow><mo
      form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
      form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>=</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mn>1</mn></msub><mo>∈</mo><mrow><mo
      form="prefix">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo form="postfix">}</mo></mrow></mrow></munder><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mn>2</mn></msub><mo>∈</mo><mrow><mo
      form="prefix">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo form="postfix">}</mo></mrow></mrow></munder><mi>…</mi><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><mrow><mo
      form="prefix">{</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo form="postfix">}</mo></mrow></mrow></munder><mi>exp</mi><mrow><mo
      form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
      form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mi>.</mi></mrow></mstyle></math></center><p>A simple look into this expression confirms that it scales exponentially
with <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math>, undesirable if we want to model and
solve large scale combinatorial problem which requires this summation.
Fortunately, some researchers have developed some tractable solutions to
approximate this summation, with the help of the gumbel distribution,
and that is what this post is about.</p><h2 id=auto-2>2<span style=margin-left:1em></span>Gumbel distribution<span style=margin-left:1em></span></h2><p>We cannot proceed without a proper introduction of gumbel distribution
[<a href=#bib-GumbelDistribution2019>1</a>]. A gumbel distribution<math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Gumbel</mi><mrow><mo
      form="prefix">(</mo><mi>μ</mi><mo>,</mo><mi>β</mi><mo form="postfix">)</mo></mrow></mrow></math>
has a cumulative density function:</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>F</mi><mrow><mo form="prefix">(</mo><mi>x</mi><mo
      form="postfix">)</mo></mrow><mo>=</mo><msup><mi>e</mi><mrow><mo>-</mo><msup><mi>e</mi><mrow><mo>-</mo><mrow><mo
      form="prefix">(</mo><mi>x</mi><mo>-</mo><mi>μ</mi><mo form="postfix">)</mo></mrow><mo>/</mo><mi>β</mi></mrow></msup></mrow></msup><mi>.</mi></mrow></mstyle></math></center><p>The standard gumbel distribution has<math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>μ</mi><mo>=</mo><mn>0</mn></mrow></math>
and <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>β</mi><mo>=</mo><mn>1</mn></mrow></math>. In
the following, I will refer<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Gumbel</mi></math> without
any parameters as the standard gumbel distribution. One of the important
properties that leads to the connection between maximization and
summation is as follows:</p><p><p><b>Theorem <class style=font-style:normal>1</class>. </b><i><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><mi>Z</mi><mo
          form="postfix">)</mo></mrow><mo>=</mo><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><mi>exp</mi><mrow><mo
          form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo
          form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>=</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></msub><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo
          form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo
          form="postfix">]</mo></mrow><mo>-</mo><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center></i></p><p><i><p><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>g</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo
          form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></math>, with a
size of <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo form="prefix">|</mo><mi>Y</mi><mo form="postfix">|</mo></mrow></math>,
is indentically, independently distributed (i.i.d.) according to<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Gumbel</mi></math> and<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>γ</mi></math>
is the Euler-Mascheroni cosntant [cite wikipedia].</p><p><b>Proof.</b></p><p>Let <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>T</mi><mo>=</mo><msub><mo>max</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></msub><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo
          form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow></mrow></math>,</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mtable columnalign="right center left">
            <mtr>
              <mtd><mrow><mi>Pr</mi><mrow><mo form="prefix">(</mo><mi>T</mi><mo>⩽</mo><mi>t</mi><mo
              form="postfix">)</mo></mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>Pr</mi><mrow><mo form="prefix">(</mo><mi>all</mi><mo>&ApplyFunction;</mo><mi>y</mi><mo>∈</mo><mi>Y</mi><mo>,</mo><mi>ϕ</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>⩽</mo><mi>t</mi><mo
              form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>Pr</mi><mrow><mo form="prefix">(</mo><mi>all</mi><mo>&ApplyFunction;</mo><mi>y</mi><mo>∈</mo><mi>Y</mi><mo>,</mo><mi>g</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>⩽</mo><mi>t</mi><mo>-</mo><mi>ϕ</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mover><mi>?</mi><mrow><mi>i</mi><mi>.</mi><mi>i</mi><mi>.</mi><mi>d</mi><mi>.</mi></mrow></mover></mtd>
              <mtd><mrow><munder><mo>&Product;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><mi>Pr</mi><mrow><mo
              form="prefix">(</mo><mi>g</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>⩽</mo><mi>t</mi><mo>-</mo><mi>ϕ</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><munder><mo>&Product;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><mi>F</mi><mrow><mo
              form="prefix">(</mo><mi>t</mi><mo>-</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>=</mo><munder><mo>&Product;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><msup><mi>e</mi><mrow><mo>-</mo><mi>e</mi><mrow><mo
              form="prefix">(</mo><mo>-</mo><mrow><mo form="prefix">(</mo><mi>t</mi><mo>-</mo><mi>ϕ</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo
              form="postfix">)</mo></mrow></mrow></msup></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>exp</mi><msup><mrow><mo form="prefix">(</mo><mo>-</mo><munder><mo>&Sum;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><msup><mi>e</mi><mrow><mo
              form="prefix">(</mo><mo>-</mo><mrow><mo form="prefix">(</mo><mi>t</mi><mo>-</mo><mi>ϕ</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo
              form="postfix">)</mo></mrow></msup><mo form="postfix">)</mo></mrow><msub><mrow></mrow><mrow></mrow></msub></msup><mo>=</mo><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mo>-</mo><munder><mo>&Sum;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><msup><mi>e</mi><mrow><mo>-</mo><mi>t</mi></mrow></msup><mo>⋅</mo><msup><mi>e</mi><mrow><mi>ϕ</mi><mrow><mo
              form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow></mrow></msup><mo
              form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>exp</mi><mrow><mo form="prefix">(</mo><mo>-</mo><msup><mi>e</mi><mrow><mo>-</mo><mi>t</mi></mrow></msup><mo>⋅</mo><munder><mo>&Sum;</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>=</mo><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mo>-</mo><msup><mi>e</mi><mrow><mo>-</mo><mi>t</mi></mrow></msup><mo>⋅</mo><mi>Z</mi><mo
              form="postfix">)</mo></mrow><mo>=</mo><mi>exp</mi><mrow><mo form="prefix">(</mo><mo>-</mo><msup><mi>e</mi><mrow><mo>-</mo><mi>t</mi></mrow></msup><mo>⋅</mo><msup><mi>e</mi><mrow><mi>log</mi><mrow><mo
              form="prefix">(</mo><mi>Z</mi><mo form="postfix">)</mo></mrow></mrow></msup><mo
              form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>exp</mi><mrow><mo form="prefix">(</mo><mo>-</mo><msup><mi>e</mi><mrow><mo>-</mo><mrow><mo
              form="prefix">(</mo><mi>t</mi><mo>-</mo><mi>log</mi><mrow><mo form="prefix">(</mo><mi>Z</mi><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></msup><mo
              form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
          </mtable></mstyle></math></center><p>Hence <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>T</mi><mo>∼</mo><mi>Gumbel</mi><mrow><mo
          form="prefix">(</mo><mi>log</mi><mrow><mo form="prefix">(</mo><mi>Z</mi><mo form="postfix">)</mo></mrow><mo>,</mo><mn>1</mn><mo
          form="postfix">)</mo></mrow></mrow></math>, whose expectation <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>𝔼</mi><mrow><mo
          form="prefix">(</mo><mi>T</mi><mo form="postfix">)</mo></mrow><mo>=</mo><mi>log</mi><mrow><mo
          form="prefix">(</mo><mi>Z</mi><mo form="postfix">)</mo></mrow><mo>+</mo><mi>γ</mi></mrow></math>.</p></i></p><p><i><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><mrow><mi>y</mi><mo>∈</mo><mi>Y</mi></mrow></msub><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo
          form="prefix">(</mo><mi>y</mi><mo form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo
          form="postfix">]</mo></mrow><mo>=</mo><mi>log</mi><mrow><mo form="prefix">(</mo><mi>Z</mi><mo
          form="postfix">)</mo></mrow><mo>+</mo><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center></i></p></p><p></p><p>This theorem, while interesting, does not give us the practical
algorithm to calculate the sum. To estimate this expectation, we still
need the same amount of gumbel variables as cartesian space <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi></math>.
Luckily, as proposed in [<a href=#bib-hazanPartitionFunctionRandom>2</a>], we have an alternative form to
compute the expectation.</p><p><p><b>Theorem <class style=font-style:normal>2</class>. </b><i>Let <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mrow><mo
        form="prefix">{</mo><msub><mi>g</mi><mi>i</mi></msub><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo
        form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>i</mi></msub></mrow></msub><mo>∼</mo><mi>Gumbel</mi><mo>,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi></mrow></math>,
i.i.d. Then</i></p><p><i><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><mi>Z</mi><mo
          form="postfix">)</mo></mrow><mo>=</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mn>1</mn></msub></msub><mo>&ApplyFunction;</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mn>2</mn></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mn>2</mn></msub></msub><mi>⋯</mi><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo>+</mo><munderover><mo>&Sum;</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo form="postfix">)</mo></mrow><mo
          form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mi>…</mi><mo form="postfix">]</mo></mrow><mo
          form="postfix">]</mo></mrow><mo>-</mo><mi>n</mi><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center><p><b>Proof.</b></p><p>To give out some intuition of the proof, we can take some baby
steps.</p><p>Given any <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>y</mi><mn>1</mn></msub><mo>∈</mo><msub><mi>Y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>∈</mo><msub><mi>Y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>∈</mo><msub><mi>Y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub></mrow></math>,
we take the sum over <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow></math>,</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><msub><mi>y</mi><mi>n</mi></msub></munder><mi>exp</mi><mrow><mo
          form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>=</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mo>&ApplyFunction;</mo><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mo>-</mo><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center><p>For convenience, denote</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
          form="postfix">)</mo></mrow><mo>=</mo><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><msub><mi>y</mi><mi>n</mi></msub></munder><mi>exp</mi><mrow><mo
          form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>=</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mo>&ApplyFunction;</mo><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mo>-</mo><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center><p>Likewise, given <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>y</mi><mn>1</mn></msub><mo>∈</mo><msub><mi>Y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>∈</mo><msub><mi>Y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>2</mn></mrow></msub><mo>∈</mo><msub><mi>Y</mi><mrow><mi>n</mi><mo>-</mo><mn>2</mn></mrow></msub></mrow></math>,
we have,</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mtable columnalign="right center left">
            <mtr>
              <mtd><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub></munder><munder><mo>&Sum;</mo><msub><mi>y</mi><mi>n</mi></msub></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><msub><mi>y</mi><mi>n</mi></msub></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
              form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub></msub><mrow><mo
              form="prefix">{</mo><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mo>-</mo><mi>γ</mi></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
              form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub></msub><mrow><mo
              form="prefix">{</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
              form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mrow><mo
              form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo form="postfix">.</mo></mrow><mo
              form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mo>-</mo><mn>2</mn><mi>γ</mi></mrow></mtd>
            </mtr>
          </mtable></mstyle></math></center><p>Rinse, wash, repeat.</p><p></p><p>Now formally, like above, denote</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>k</mi></msub><mo
          form="postfix">)</mo></mrow><mo>=</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo
          form="postfix">)</mo></mrow></mrow></msub><mrow><mo form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></msub><mo>&ApplyFunction;</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mrow><mi>k</mi><mo>+</mo><mn>2</mn></mrow></msub><mo
          form="postfix">)</mo></mrow></mrow></msub><mrow><mo form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mrow><mi>k</mi><mo>+</mo><mn>2</mn></mrow></msub></msub><mi>⋯</mi><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo>+</mo><munderover><mo>&Sum;</mo><mrow><mi>i</mi><mo>=</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo form="postfix">)</mo></mrow><mo
          form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mi>…</mi><mo form="postfix">]</mo></mrow><mo
          form="postfix">]</mo></mrow><mo>-</mo><mrow><mo form="prefix">(</mo><mi>n</mi><mo>-</mo><mi>k</mi><mo
          form="postfix">)</mo></mrow><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center><p>We assume,</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>k</mi></msub><mo
          form="postfix">)</mo></mrow><mo>=</mo><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>∈</mo><msub><mi>Y</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow></munder><mi>exp</mi><mrow><mo
          form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo>,</mo></mrow></mstyle></math></center><p>We know from above that when <math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>k</mi><mo>=</mo><mi>n</mi><mo>-</mo><mn>1</mn></mrow></math>,
this is true.</p><p>As for its next recursion, we need to prove that,</p><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mtable columnalign="right center left">
            <mtr>
              <mtd><mrow><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mrow><mi>k</mi><mo>-</mo><mn>1</mn></mrow></msub><mo
              form="postfix">)</mo></mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mi>k</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>k</mi></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mi>k</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>k</mi></msub></mrow></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>∈</mo><msub><mi>Y</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><mi>log</mi><mrow><mo form="prefix">(</mo><munder><mo>&Sum;</mo><mrow><msub><mi>y</mi><mi>k</mi></msub><mo>∈</mo><msub><mi>Y</mi><mi>k</mi></msub></mrow></munder><mi>exp</mi><mrow><mo
              form="prefix">(</mo><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>k</mi></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow><mo form="postfix">)</mo></mrow></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>k</mi></msub><mo
              form="postfix">)</mo></mrow><mo>∼</mo><mi>Gumbel</mi></mrow></msub><mrow><mo
              form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>k</mi></msub></msub><mrow><mo
              form="prefix">{</mo><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>k</mi></msub><mo
              form="postfix">)</mo></mrow><mo>+</mo><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>k</mi></msub><mo
              form="postfix">)</mo></mrow><mo form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mo>-</mo><mi>γ</mi></mrow></mtd>
            </mtr>
            <mtr>
              <mtd><mrow></mrow></mtd>
              <mtd><mo>=</mo></mtd>
              <mtd><mrow><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mi>k</mi></msub><mo
              form="postfix">)</mo></mrow></mrow></msub><mrow><mo form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>k</mi></msub></msub><mi>…</mi><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
              form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
              form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mrow><mo
              form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
              form="postfix">)</mo></mrow><mo>+</mo><munderover><mo>&Sum;</mo><mrow><mi>i</mi><mo>=</mo><mi>k</mi></mrow><mi>n</mi></munderover><mi>g</mi><mrow><mo
              form="prefix">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo form="postfix">)</mo></mrow><mo
              form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mo>-</mo><mrow><mo
              form="prefix">(</mo><mi>n</mi><mo>-</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo
              form="postfix">)</mo></mrow><mi>γ</mi><mo form="postfix">]</mo></mrow></mrow></mtd>
            </mtr>
          </mtable></mstyle></math></center><p>With induction,</p></i></p><p><i><center><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle displaystyle="true"><mrow><mi>T</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>0</mn></msub><mo
          form="postfix">)</mo></mrow><mo>=</mo><mi>log</mi><mrow><mo form="prefix">(</mo><mi>Z</mi><mo
          form="postfix">)</mo></mrow><mo>=</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mn>1</mn></msub></msub><mo>&ApplyFunction;</mo><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mn>2</mn></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mn>2</mn></msub></msub><mi>⋯</mi><msub><mi>𝔼</mi><mrow><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo form="postfix">)</mo></mrow></mrow></msub><mrow><mo
          form="prefix">[</mo><msub><mo>max</mo><msub><mi>y</mi><mi>n</mi></msub></msub><mrow><mo
          form="prefix">{</mo><mi>ϕ</mi><mrow><mo form="prefix">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo>,</mo><msub><mi>y</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>y</mi><mi>n</mi></msub><mo
          form="postfix">)</mo></mrow><mo>+</mo><munderover><mo>&Sum;</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>g</mi><mrow><mo
          form="prefix">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo form="postfix">)</mo></mrow><mo
          form="postfix">}</mo></mrow><mo form="postfix">]</mo></mrow><mi>…</mi><mo form="postfix">]</mo></mrow><mo
          form="postfix">]</mo></mrow><mo>-</mo><mi>n</mi><mi>γ</mi><mi>.</mi></mrow></mstyle></math></center></i></p></p><p>With this [cite theorem], we only need to estimate<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math>
random gumbel variables.</p><h2 id=auto-3>3<span style=margin-left:1em></span>Personal remarks<span style=margin-left:1em></span></h2><p>This blog is nearly two months overdue, I think there are two reasons
for that. First of all, I think this article does not bring much
knowledge to the table and in my opinion, a &ldquo;rip-off&rdquo; from
other people's work. Therefore, I am reluctant to publish this article.
Second of all, it takes away huge chunks of my time to write (borrow)
something worthwhile, and I am always busy even though sometimes I don't
know why I am so busy :). Thus, I am also reluctant to spend time
writing up &ldquo;rip-off&rdquo; article such as this. In fact, it takes
great efforts to present knowledge in an accessible manner, which I do
not claim this article is. In light of such circumstances and some
advice taken from <a href=http://matt.might.net/articles/how-to-blog-as-an-academic/>Matt Might on low cost blogging</a>, I may
have to change my positioning of this blog: from writing up my original
thinkings to borrowing knowledge from other sources or even just a
byproduct of reading some papers along with a little bit of my own
interpretation. It may not be as rigorous and complete when first
published, but it will be refined overtime. In this way, I may find it
more appoarchable.</p><h2 id=auto-4>Bibliography<span style=margin-left:1em></span></h2><div style=text-indent:0><div class=compact-block><font style=font-size:84%><dl><p><p><a id=bib-GumbelDistribution2019></a>Gumbel distribution. Page Version ID: 930259942.</p><p><a id=bib-hazanPartitionFunctionRandom></a>Tamir Hazan and Tommi Jaakkola. On the Partition
Function and Random Maximum A-Posteriori Perturbations. Page 8.</p></p></dl></font></div></div></body></html></div></div></section><footer class=footer><div class="content has-text-centered"><p><a href=https://github.com/orf/bare-hugo-theme target=_blank>Bare Hugo theme.</a></p></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','Ua-139857559-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>